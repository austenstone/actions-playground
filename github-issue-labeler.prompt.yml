name: GitHub Issue Labeler
description: Analyzes GitHub issue titles and descriptions to recommend appropriate labels from available options
model: openai/gpt-4.1
modelParameters:
  temperature: 0.3
  maxTokens: 512
messages:
  - role: system
    content: >
      You are a GitHub issue labeling assistant. Your job is to analyze issue
      titles and descriptions, then suggest appropriate labels from a provided list.
      
      Rules:
      - Only suggest labels that exist in the available labels list
      - Suggest 1-5 labels that best describe the issue
      - Output ONLY a comma-separated list of label names, nothing else
      - Do not include explanations, prefixes, or additional text
      - If no labels are appropriate, output "none"
  - role: user
    content: |
      Analyze this GitHub issue and suggest appropriate labels from the available options.

      **Issue Title:**
      {{title}}

      **Issue Body:**
      {{body}}

      **Available Labels:**
      {{labels}}

      Respond with only the comma-separated label names:
testData:
  - title: Application crashes when clicking submit button
    body: |
      **Steps to reproduce:**
      1. Fill out the form with valid data
      2. Click the submit button
      3. App crashes with null pointer exception in console
      
      **Expected behavior:**
      Form should submit successfully
      
      **Actual behavior:**
      Application crashes immediately
      
      **Environment:**
      - Browser: Chrome 120
      - OS: Windows 11
    labels: bug, enhancement, documentation, question, help-wanted, good-first-issue, wontfix, duplicate, invalid, critical, frontend, backend, needs-triage
    expected: bug, critical, frontend, needs-triage
  
  - title: Add dark mode support
    body: |
      It would be great if the application supported dark mode. Many users prefer working in dark environments and this would improve accessibility.
      
      I'd be willing to help implement this if someone can point me in the right direction.
    labels: bug, enhancement, documentation, question, help-wanted, good-first-issue, wontfix, duplicate, invalid, critical, frontend, backend, needs-triage
    expected: enhancement, frontend, help-wanted
  
  - title: How do I configure the API endpoint?
    body: |
      I'm new to this project and can't find documentation on how to configure the API endpoint for production deployment.
      
      Where should I set the API_URL environment variable?
    labels: bug, enhancement, documentation, question, help-wanted, good-first-issue, wontfix, duplicate, invalid, critical, frontend, backend, needs-triage
    expected: question, documentation
  
  - title: Improve error messages for validation failures
    body: |
      Current error messages are too generic. When form validation fails, users see "Validation error" without details about which fields failed.
      
      We should provide specific error messages for each field that fails validation.
      
      This would be a good first contribution for someone learning the codebase.
    labels: bug, enhancement, documentation, question, help-wanted, good-first-issue, wontfix, duplicate, invalid, critical, frontend, backend, needs-triage
    expected: enhancement, frontend, good-first-issue, help-wanted
  
  - title: Database migration fails on PostgreSQL 15
    body: |
      Running `npm run migrate` fails with error:
      
      ```
      ERROR: relation "users" does not exist
      ```
      
      This only happens on PostgreSQL 15. Works fine on PostgreSQL 14.
    labels: bug, enhancement, documentation, question, help-wanted, good-first-issue, wontfix, duplicate, invalid, critical, frontend, backend, needs-triage, database
    expected: bug, backend, database, needs-triage
  
  - title: Security vulnerability in authentication flow
    body: |
      URGENT: Authentication tokens are being logged in plaintext to application logs.
      
      This is a serious security issue that needs immediate attention.
      
      Affected versions: 2.0.0 - 2.3.1
    labels: bug, enhancement, documentation, question, security, critical, frontend, backend, needs-triage
    expected: bug, security, critical, backend, needs-triage

evaluators:
  - name: Output format is CSV or 'none'
    string:
      contains: ','
  - name: Similarity to expected labels
    uses: github/similarity
  - name: Response relevance
    uses: github/relevance
